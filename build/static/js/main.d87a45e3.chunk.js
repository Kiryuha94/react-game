(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{20:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),a=n(13),s=n.n(a),l=(n(20),n(6)),c=n(15),r=n(3),u=n(12),d=n(7),j=n(8),b=n(10),h=n(9),f=n(0),v=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onClick=function(t){return function(){(0,e.props.onCellClick)(t)}},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.field,o={background:t.cellColor};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"field",children:n.map((function(t,n){return Object(f.jsx)("div",{style:o,className:"sell",onClick:e.onClick(n),children:t||""},n)}))})})}}]),n}(o.PureComponent),y=function(e){var t=e.onClick,n=e.className;return Object(f.jsx)("button",{className:n,onClick:t,children:e.title})},O=n(14),x=n.n(O),m=function(){return Object(f.jsxs)("div",{className:"footer",children:[Object(f.jsx)("span",{className:"year",children:"2021"}),Object(f.jsx)("a",{className:"link",href:"https://rs.school/js/",children:Object(f.jsx)("img",{className:"footer-img",src:"media/rs_school_js.svg",alt:"rs_school_js"})})]})},g=function(e){var t=Object(o.useState)(e.backgroundColor),n=Object(r.a)(t,2),i=n[0],a=n[1],s=Object(o.useState)(e.cellBackgroundColor),l=Object(r.a)(s,2),c=l[0],u=l[1],d=Object(o.useState)(e.zoom),j=Object(r.a)(d,2),b=j[0],h=j[1],v=Object(o.useState)(e.stateAudio),O=Object(r.a)(v,2),x=O[0],m=O[1];return Object(f.jsx)("div",{className:"supplmented",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{onClick:function(){e.onClose({backgroundColor:i,cellBackgroundColor:c,zoom:b,stateAudio:x})},className:"close",children:"+"}),Object(f.jsxs)("label",{children:["Color background:",Object(f.jsx)("input",{defaultValue:i,type:"color",onChange:function(e){a(e.target.value)}})]}),Object(f.jsxs)("label",{children:["Color cell:",Object(f.jsx)("input",{defaultValue:c,type:"color",onChange:function(e){u(e.target.value)}})]}),Object(f.jsxs)("label",{children:["Setting zoom:",Object(f.jsx)("input",{className:"zoom",type:"range",min:"5",max:"21",step:"2",value:b,onChange:function(e){h(e.target.value)}})]}),Object(f.jsxs)("label",{children:["Audio:",Object(f.jsx)("input",{className:"audio",type:"checkbox",checked:x,onChange:function(e){m(e.target.checked)}})]}),Object(f.jsx)(y,{onClick:function(){e.onClickOk({backgroundColor:i,cellBackgroundColor:c,zoom:b,stateAudio:x})},title:"OK"})]})})},C=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(e){var o;Object(d.a)(this,n),(o=t.call(this,e)).XO={x:"X",o:"O"},o.winnerCombination=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],o.onCellClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o.state,i=n.isAudioActive,a=n.count,s=n.field,l=n.isNextMove,c=n.isFirstPlayerStarted,r=n.isTwoPlayer,u=n.isAutoPlay,d=!(a%2),j=c?!d:d;if(null===s[e]&&(l||t))if(s[e]=a%2?o.XO.o:o.XO.x,i&&(a%2?o.audioO.play():o.audioX.play()),o.setState({field:[].concat(s),count:a+1}),o.checkCombination(s))o.onWin(a);else if(s.every((function(e){return null!==e})))o.onDraw();else if(r||j||o.boteMove(),u){var b=!(a%2),h=c?b:!b;h||o.autoplay()}},o.checkCombination=function(e){var t,n=Object(u.a)(o.winnerCombination);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=Object(r.a)(i,3),s=a[0],l=a[1],c=a[2];if(e[s]&&e[s]===e[l]&&e[s]===e[c])return!0}}catch(d){n.e(d)}finally{n.f()}return!1},o.onDraw=function(){var e=o.state.isAutoPlay;o.setState({isAutoPlay:!1,showButtonNextRound:!0,isPlay:!1,isNextMove:!1,isWin:!0,win:"Draw!"}),e||o.setState({showButtonNextRound:!1})},o.hendlerSingle=function(){o.setState({field:Array(9).fill(null),isTwoPlayer:!1,isPlay:!0,isNextMove:!0,count:0,isWin:!1,firstPlayerWins:0,secondPlayerWins:0})},o.boteMove=function(){o.setState({isNextMove:!1,visible:!0}),setTimeout((function(){o.setState({isNextMove:!0,visible:!1}),o.onCellClick(o.getIndexForBotMove(),!0)}),2e3)},o.autoplay=function(){var e=o.state,t=e.isWin;e.isAutoPlay,e.showButtonNextRound;o.setState({isNextMove:!1,visible:!0,isAutoPlay:!0,isWin:!1}),setTimeout((function(){o.setState({visible:!1,isAutoPlay:!0}),o.onCellClick(o.getIndexForBotMove(),!0)}),2e3),t&&o.setState({field:new Array(9).fill(null),count:0})},o.getIndexForBotMove=function(){var e=o.state,t=e.field,n=e.isFirstPlayerStarted,i=o.winnerCombination.map((function(e){return e.map((function(e){return{index:e,value:t[e]}}))})),a=function(e){var t,n=Object(u.a)(i);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o[0].value===e&&o[1].value===e&&null===o[2].value)return o[2].index;if(o[0].value===e&&o[2].value===e&&null===o[1].value)return o[1].index;if(o[1].value===e&&o[2].value===e&&null===o[0].value)return o[0].index}}catch(a){n.e(a)}finally{n.f()}},s=a(n?o.XO.o:o.XO.x);if(s)return s;var l=a(n?o.XO.x:o.XO.o);if(l)return l;var r=t.reduce((function(e,t,n){return null===t?[].concat(Object(c.a)(e),[n]):e}),[]);return r[Math.floor(Math.random()*r.length)]},o.handlerTwoPerson=function(){o.setState({field:Array(9).fill(null),isTwoPlayer:!0,isPlay:!0,count:0,isNextMove:!0,isWin:!1,firstPlayerWins:0,secondPlayerWins:0})},o.onWin=function(e){var t,n=o.state,i=n.isAutoPlay,a=(n.isWin,n.firstPlayerWins),s=n.secondPlayerWins,l=n.isFirstPlayerStarted;n.win,n.showButtonNextRound;n.isAudioActive&&o.audioWin.play();var c=!(e%2);t=l?c:!c,o.setState({isAutoPlay:!1,showButtonNextRound:!0,isWin:!0,isPlay:!1,isNextMove:!1,firstPlayerWins:t?a+1:a,secondPlayerWins:t?s:s+1,win:"".concat(t?"First player WINS":"Second player WINS")}),i&&o.setState({showButtonNextRound:!1})},o.nextRaund=function(){var e=o.state,t=e.isFirstPlayerStarted,n=e.isTwoPlayer;e.count,e.showButtonNextRound;o.setState({showButtonNextRound:!1,field:Array(9).fill(null),isNextMove:!0,isPlay:!0,count:0,isWin:!1,isFirstPlayerStarted:!t}),!n&&t&&o.boteMove()},o.onClose=function(e){o.setState(Object(l.a)(Object(l.a)({},e),{},{showSetting:!1}))},o.onCLickOk=function(e){o.setState(Object(l.a)(Object(l.a)({},e),{},{showSetting:!1})),o.addSettings(e)},o.addSettings=function(e){var t=e.backgroundColor,n=e.zoom,i=e.stateAudio,a=document.getElementById("root"),s=document.querySelector("html");a.style.background=t,s.style.fontSize="".concat(n,"px"),o.setState({isAudioActive:i})},o.showSetting=function(){o.setState({showSetting:!0})},o.reset=function(){o.setState({isTwoPlayer:null,firstPlayerWins:0,secondPlayerWins:0,field:new Array(9).fill(null),isNextMove:!1,count:0,isWin:!1,isPlay:!1,isFirstPlayerStarted:!0,visible:!1,showButtonNextRound:!1,showSetting:!1,backgroundColor:"#8bccd8",cellBackgroundColor:"",zoom:10,isAutoPlay:!1,isAudioActive:!0},(function(){o.addSettings(o.state)}))};var i=localStorage.getItem("state");if(i){var a=JSON.parse(i);o.state=a}else o.state={isTwoPlayer:null,firstPlayerWins:0,secondPlayerWins:0,field:new Array(9).fill(null),isNextMove:!1,count:0,isWin:!1,isPlay:!1,isFirstPlayerStarted:!0,win:"",visible:!1,showButtonNextRound:!1,showSetting:!1,backgroundColor:"",cellBackgroundColor:"",zoom:"",isAutoPlay:!1,isAudioActive:!0};o.urlX="media/audio/x.mp3",o.urlO="media/audio/o.mp3",o.urlWin="media/audio/win.mp3",o.audioX=new Audio(o.urlX),o.audioO=new Audio(o.urlO),o.audioWin=new Audio(o.urlWin),window.onbeforeunload=function(){localStorage.setItem("state",JSON.stringify(o.state))};var s=o.state,j=s.count,b=s.isFirstPlayerStarted,h=!(j%2);return s.isTwoPlayer||(b?h:!h)||o.boteMove(),o}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.onClose(this.state),this.addSettings(this.state)}},{key:"render",value:function(){var e=this.state,t=e.isAutoPlay,n=e.isPlay,o=e.firstPlayerWins,i=e.secondPlayerWins,a=e.visible,s=e.isWin,l=e.showButtonNextRound,c=e.count,r=e.isFirstPlayerStarted,u=e.isTwoPlayer,d=e.showSetting,j=e.backgroundColor,b=e.cellBackgroundColor,h=e.zoom,O=e.stateAudio,C=!(c%2),S=r?C:!C;return Object(f.jsxs)(f.Fragment,{children:[d&&Object(f.jsx)("div",{className:"settings",children:Object(f.jsx)(g,{onClose:this.onClose,onClickOk:this.onCLickOk,cellBackgroundColor:b,zoom:h,backgroundColor:j,stateAudio:O})}),s&&Object(f.jsx)("img",{className:"icubovich",src:"media/Icubovich.png",alt:"Icubovich"}),Object(f.jsx)("h1",{children:"Tic Tac Toe"}),!n&&Object(f.jsxs)("div",{children:[Object(f.jsx)(y,{onClick:this.showSetting,title:"Setting designe"}),Object(f.jsx)(y,{className:"autoplay",onClick:this.autoplay,title:"Autoplay"})]}),!n&&Object(f.jsx)(y,{className:"".concat(u?"button-active":""),onClick:this.handlerTwoPerson,title:"Play for 2 persons"}),!n&&Object(f.jsx)(y,{className:"".concat(!1===u?"button-active":""),onClick:this.hendlerSingle,title:"Single play"}),Object(f.jsxs)("h2",{className:"score",children:["Score:",Object(f.jsx)("label",{className:"".concat(S?"player-active":""),children:"Player: ".concat(o)}),Object(f.jsx)("label",{className:"".concat(S?"":"player-active"),children:"Player 2: ".concat(i)})]}),s&&Object(f.jsx)("p",{className:"draw",children:this.state.win}),Object(f.jsx)("div",{className:a?"":"hidden",children:Object(f.jsx)(x.a,{type:"ThreeDots",color:"yellow",height:20,width:50})}),Object(f.jsx)(v,{onCellClick:this.onCellClick,field:this.state.field,cellColor:b}),l&&Object(f.jsx)(y,{onClick:this.nextRaund,title:"Next round!"}),!t&&Object(f.jsx)(y,{onClick:this.reset,title:"reset"}),Object(f.jsx)(m,{})]})}}]),n}(o.Component);s.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d87a45e3.chunk.js.map